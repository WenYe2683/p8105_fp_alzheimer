---
output: 
  html_document:
    toc: true
    toc_float: true
    code_folding: hide
    theme: flatly
---

<style>
/* Global Styles */
html, body {
  font-family: Georgia, 'Times New Roman', Times, serif;
  line-height: 1.8;
  color: #333;
  margin: 10px;
  padding: 10px;
  background-color: white;
}

/* Floating Navigation Bar */
.navbar {
  background-color: rgba(0, 0, 0, 0.3) !important;
  border: none !important;
  position: fixed !important;
  top: 0;
  width: 100%;
  z-index: 1000;
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
}

.navbar-default .navbar-brand,
.navbar-default .navbar-nav > li > a {
  color: white !important;
  text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
}

.navbar-default .navbar-brand:hover,
.navbar-default .navbar-nav > li > a:hover {
  color: #f0f0f0 !important;
}

.navbar-default .navbar-toggle {
  border-color: rgba(255,255,255,0.5);
}

.navbar-default .navbar-toggle .icon-bar {
  background-color: white;
}

.navbar-default .navbar-toggle:hover,
.navbar-default .navbar-toggle:focus {
  background-color: rgba(255,255,255,0.1);
}

body {
  padding-top: 70px;
}

/* Content Sections */
.content-section {
  padding: 5px 10px;
  max-width: 1200px;
  margin: 0 auto 10px auto;
  background: rgba(255, 255, 255, 0.7);
  border-radius: 10px;
  box-shadow: 0 4px 15px rgba(0,0,0,0.1);
}

.content-section h1 {
  font-size: 1.8em;
  color: #d97706;
  margin-top: 5px !important;
  margin-bottom: 5px;
  padding-top: 5px !important;
  font-weight: 900;
  font-family: Georgia, 'Times New Roman', Times, serif;
}

.content-section h2 {
  font-size: 1.5em;
  color: #ea580c;
  margin-top: 5px !important;
  margin-bottom: 5px;
  padding-top: 5px !important;
  font-weight: 800;
  font-family: Georgia, 'Times New Roman', Times, serif;
}

.content-section h3 {
  font-size: 1.2em;
  color: #d97706;
  margin-top: 5px !important;
  margin-bottom: 5px;
  padding-top: 5px !important;
  font-weight: 600;
  font-family: Georgia, 'Times New Roman', Times, serif;
}

.content-section p {
  font-size: 1em;
  color: #555;
  margin-bottom: 15px;
  line-height: 1.8;
}

.content-section strong {
  color: #d97706;
  font-weight: 700;
}

.content-section ul, .content-section ol {
  color: #555;
  line-height: 1.8;
  margin-bottom: 15px;
}

.content-section li {
  margin-bottom: 8px;
}

/* Center all figures */
.figure {
  text-align: center !important;
  margin: 20px auto !important;
}

img {
  display: block !important;
  margin-left: auto !important;
  margin-right: auto !important;
}

/* Table styling */
table {
  margin: 20px auto;
  border-collapse: collapse;
  width: 100%;
}

table th,
table td {
  border-top: 1px solid #ddd;
  border-bottom: 1px solid #ddd;
  padding: 8px 12px;
  text-align: left;
}

table th {
  border-top: 2px solid #d97706;
  border-bottom: 2px solid #d97706;
  background-color: rgba(217, 119, 6, 0.1);
  font-weight: 700;
  color: #d97706;
}

table tr:last-child td {
  border-bottom: 2px solid #d97706;
}
</style>

<div class="content-section">

# Overview

This page documents the data sources used in our analysis of cognitive decline and Alzheimer's-related indicators across the United States. We integrated multiple publicly available datasets to examine geographic, socioeconomic, and environmental factors associated with self-reported cognitive problems among middle-aged and older adults.

```{r message=FALSE}
library(tidyverse)
library(patchwork)
library(scales)
library(dplyr)
library(knitr)
library(stringr)
library(ggplot2)
library(kableExtra)

knitr::opts_chunk$set(
  fig.width = 6,
  fig.asp = .6,
  out.width = "90%"
)

theme_set(theme_minimal() + theme(legend.position = "bottom"))

options(
  ggplot2.continuous.colour = "viridis",
  ggplot2.continuous.fill = "viridis"
)

scale_colour_discrete = scale_colour_viridis_d
scale_fill_discrete = scale_fill_viridis_d
```

</div>

<div class="content-section">

# Data Source

We integrated 4 publicly available datasets to examine demographic, socioeconomic, environmental, and geographic factors associated with self-reported cognitive problems among middle-aged and older adults:

```{r data-sources, echo=FALSE}
tibble(
  `Data Source` = c(
    "CDC Alzheimer's Disease and Healthy Aging Data",
    "U.S. Census American Community Survey (ACS)",
    "U.S. Census American Community Survey (ACS)",
    "EPA Air Quality System (AQS)"
  ),
  `Variables` = c(
    "Cognitive decline prevalence by state, age, sex",
    "Median household income by state",
    "Educational attainment (% bachelor's degree+)",
    "PM2.5 concentrations by state"
  ),
  `Years` = c("2015–2016", "2015–2016", "2015–2016", "2015–2016"),
  `Geographic Level` = c("State", "State (aggregated from county)", "State", "State (aggregated from county)")
) |>
  kable(caption = "Summary of Data Sources") |>
  kable_styling(bootstrap_options = c("striped", "hover"))
```

</div>

<div class="content-section">

# Data Cleaning

```{r warning=FALSE, message=FALSE}
raw_az_data <- read.csv("data/2015-2022 Alzheimer Data.csv") |>
  janitor::clean_names()

raw_az_data <- raw_az_data[-nrow(raw_az_data), ]

az_clean <- raw_az_data |>
  filter(
    !is.na(data_value),
    !is.na(year_start),
    !is.na(location_abbr)
  )
```

We obtained data from the Centers for Disease Control and Prevention (CDC) Alzheimer's Disease and Healthy Aging Data, which are derived from the Behavioral Risk Factor Surveillance System (BRFSS). After excluding records with missing key identifiers, our analytic dataset contained **32,616** observations from **59** states and territories, covering survey years **2015–2022**. The dataset includes **39** distinct topics and specific questions on health status and health-related behaviors among middle-aged and older adults.

```{r}
# Generate summary table
az_clean |>
  summarise(
    n_rows = n(),
    n_states = n_distinct(location_abbr),
    year_min = min(year_start),
    year_max = max(year_start),
    n_topics = n_distinct(topic),
    n_questions = n_distinct(question)
  ) |>
  kable(
    col.names = c("Total Observations", "States/Territories", "Min Year", "Max Year", "Topics", "Questions"),
    caption = "Table 1: Descriptive Statistics of the Initial Cleaned Dataset",
    format.args = list(big.mark = ","),
    align = "c"
  )
```

Main steps of data wrangling was presenting below:

* Removed the last row of the dataset, which appeared to be an incomplete or `end-of-file` artifact

* Filtered out records with missing values in three key variables:

    * `data_value` (prevalence estimate)

    * `year_start` (survey year)

    * `location_abbr` (state abbreviation)

* Filtered to cognitive-related topics only by keeping rows where the topic variable contained "cognitive decline" or "cognitive impairment" (case-insensitive matching)

* Created new grouping variables:

    * `age_group`: Extracted from stratification1 when stratification_category1 equals "Age Group", otherwise set to "Overall"

    * `sex_group`: Extracted from stratification2 when stratification_category2 equals "Sex", otherwise set to "Overall"

* Restricted analytic sample to adults aged 65+ years with overall sex grouping for the main state-level analyses.

For this study, we focused on BRFSS items whose topic was labeled **"cognitive decline"** or **"cognitive impairment"**. These items capture self-reported cognitive problems among middle-aged and older adults, and we treat them as Alzheimer's-related cognitive indicators rather than clinically confirmed Alzheimer's disease.

```{r}
az_cog <- az_clean |>
  filter(
    str_detect(topic, regex("cognitive decline|cognitive impairment",
                            ignore_case = TRUE))
  )

# sex and age summary
az_cog_summary_base <- az_cog |>
  mutate(
    age_group = case_when(
      stratification_category1 == "Age Group" ~ stratification1,
      TRUE ~ "Overall"
    ),
    sex_group = case_when(
      stratification_category2 == "Sex" ~ stratification2,
      TRUE ~ "Overall"
    )
  )

### state × age × sex table
az_cog_state_age_sex <- az_cog_summary_base |>
  group_by(
    location_desc,
    age_group,
    sex_group
  ) |>
  summarise(
    n_obs = n(),
    mean_value = mean(data_value, na.rm = TRUE),
    .groups = "drop"
  ) |>
  arrange(desc(mean_value))

# make it into table
az_cog_state_age_sex |>
  head(10) |>
  kable(
    col.names = c("State/Territory", "Age Group", "Sex", "Obs Count", "Mean Prevalence (%)"),
    caption = "Table 2: Top 10 Mean Prevalence of Cognitive Decline by State/Territory, Age, and Sex",
    digits = 1,
    align = "c"
  )
```

```{r}
# top 10 states (2015-2016)
az_cog_65_overall <- az_cog_summary_base |>
  filter(
    age_group == "65 years or older",
    sex_group == "Overall"
  )

num_65 = nrow(az_cog_65_overall)
years_available = sort(unique(az_cog_65_overall$year_start))
```

The CDC Healthy Aging dataset covers survey years 2015–2022. For topics coded as Cognitive Decline or Cognitive Impairment, data were only available in 2015–2016; therefore, our Alzheimer's-related analyses are restricted to these two years.

```{r}
az_cog_65_overall <- az_cog_summary_base |>
  filter(
    age_group == "65 years or older",
    sex_group == "Overall"
  )

years_use <- c(2015, 2016)

az_cog_65_overall_15_16 <- az_cog_65_overall |>
  filter(year_start %in% years_use)

top10_state_15_16 <- az_cog_65_overall_15_16 |>
  group_by(location_desc) |>
  summarise(
    n_obs = n(),
    mean_15_16 = mean(data_value, na.rm = TRUE),
    .groups = "drop"
  ) |>
  arrange(desc(mean_15_16)) |>
  slice_head(n = 10)

top10_state_15_16 |>
  kable(
    col.names = c("State/Territory", "Obs Count", "Mean Prevalence (%)"),
    caption = "Table 3: Top 10 State/Territory with Highest Cognitive Decline Prevalence (Age 65+, 2015–2016)",
    digits = 1,
    align = "c"
  )
```

Using data from 2015–2016, we ranked states and regions by the mean prevalence of Alzheimer's-related cognitive indicators among adults aged 65 years and older (all sexes combined).

The highest burden was observed in Puerto Rico (mean prevalence 47.9%), which was notably higher than any U.S. state or region. The Northeast region ranked second (33.6%), followed by Oklahoma (31.5%), Mississippi (31.4%), and the South region as a whole (31.0%). 

The remaining states in the top ten—South Dakota, Massachusetts, Alabama, Alaska, and South Carolina—all had mean prevalences around 30%. Overall, these results suggest substantial geographic variation in self-reported cognitive problems among older adults, with several Southern states and Puerto Rico showing particularly high levels.

The Top 10 list for 2015–2016 is different from the earlier state–age–sex table because they summarize different things. The state–age–sex table ranks specific subgroups (for example, women aged 50–64 in Puerto Rico), so it shows where the highest subgroup prevalences occur. 

In contrast, the 2015–2016 Top 10 is based only on adults aged 65+ with sexes combined, giving one value per state. This ranking reflects overall burden in older adults, not the maximum value in any age–sex subgroup, and provides useful context for later stratified analyses or adjustment for potential confounders such as age, sex, or region.

</div>

<div class="content-section">

# Initial Analysis
## Socioeconomic Factor: Income

We obtained both income and education data from the U.S. Census Bureau's American Community Survey (ACS), which provides reliable state-level socioeconomic indicators.

Main steps of data wrangling was presenting below:

* Import two separate CSV files: `median income-2015.csv` and `median income-2016.csv`

* Skipped the first row (header row) using skip = 1

* Applied `janitor::clean_names()` to standardize column names

* Selected and renamed key variables using transmute():

    * Created year variable (set to 2015 or 2016)

    * Kept `state_name` from `geographic_area_name`

    * Converted `median_income_dollars_estimate_households` to numeric and renamed to `median_income`

* Combined both years into a single dataset using `bind_rows()`

* Extracted state names from the county-state format (e.g., "Albany County, New York" → "New York") by parsing the text after the comma using `str_extract()` and `str_squish()`

* Aggregated to state level by grouping by year and state, then calculating:

    * No. of each country

    * Median of county-level median incomes: `median_state`

    * Mean of county-level median incomes: `mean_state`

An example of cleaned dataset is shown below:

```{r message=FALSE}
#data import
inc15 <- read_csv("data/median income-2015.csv", skip = 1) |>
  janitor::clean_names() |>
  transmute(
    year = 2015,
    state_name = geographic_area_name,
    median_income = as.numeric(median_income_dollars_estimate_households)
  )

inc16 <- read_csv("data/median income-2016.csv", skip = 1) |>
  janitor::clean_names() |>
  transmute(
    year = 2016,
    state_name = geographic_area_name,
    median_income = as.numeric(median_income_dollars_estimate_households)
  )

income_state <- bind_rows(inc15, inc16)

income_state_with_state <- income_state |>
  mutate(
    state = str_squish(str_extract(state_name, "[^,]+$")))

income_state_level <- income_state_with_state |>
  group_by(year, state) |>
  summarise(
    n_counties = n(),
    median_income_state = median(median_income, na.rm = TRUE),
    .groups = "drop"
  )

income_state_level <- income_state_with_state |>
  group_by(year, state) |>
  summarise(
    n_counties = n(),
    median_state = median(median_income, na.rm = TRUE),
    mean_state   = mean(median_income, na.rm = TRUE),
    .groups = "drop"
  )

income_state_level |>
  head(10) |>
  kable(
    col.names = c("Year", "State/Territory", "No. of Counties", "Median Income (usd)", "Average Income (usd)"),
    caption = "Table 4: Aggregated State/Territory-Level Household Income Statistics (2015-2016)",
    digits = 0,           
    format.args = list(big.mark = ","),
    align = "c"
  )
```

```{r}
state_vec <- unique(income_state_level$state)

az_cog_65_overall_state <- az_cog_65_overall |>
  filter(
    year_start %in% c(2015, 2016),
    sex_group == "Overall",
    location_desc %in% state_vec
  )

az_income <- az_cog_65_overall_state |>
  left_join(
    income_state_level,
    by = c("year_start" = "year",
           "location_desc" = "state")
  )
```

Then we merging with Primary Healthy Aging Dataset:

* Filtered cognitive decline data to years 2015–2016, adults aged 65+, and overall sex grouping

* Kept only states/territories that **exist in both datasets** using `location_desc %in% state_vec`

* Performed a left join by matching `year_start` (from CDC data) to `year` (from income data) and `location_desc` (from CDC data) to `state` (from income data)

As the Healthy Aging dataset is designed to monitor cognitive health in older adults and Alzheimer's disease primarily affects seniors, we restricted our analytic sample to respondents aged 65+ years. For the main state/territory-level analysis, we used sex-grouped estimates labeled "Overall" rather than sex-specific values so that each state/territory–year contributed a single prevalence estimate, simplifying the comparison with state/territory-level income and avoiding multiple correlated observations per state.

## Socioeconomic Factor: Education

Educational attainment data were also obtained from the ACS for the same years (2015–2016).

```{r message=FALSE}
edu15_raw <- read_csv("data/education2015.csv", skip = 1) |>
  janitor::clean_names()

edu15_state <- edu15_raw |>
  filter(!str_detect(geographic_area_name, ","))

edu16_raw <- read_csv("data/education2016.csv", skip = 1) |>
  janitor::clean_names()

edu16_state <- edu16_raw |>
  filter(!str_detect(geographic_area_name, ","))
```

Main steps of education data wrangling was presenting below:

* Import two separate CSV files: `education2015.csv` and `education2016.csv`

* Skipped the first row using `skip = 1`

* Applied `janitor::clean_names()` to standardize column names

* Filtered to state/territory-level rows only by removing rows where `geographic_area_name` contained a comma (which indicates county-level data like "Albany County, New York")

* Selected and renamed key variables using `transmute()`:

    * Created year variable (set to 2015 or 2016)

    * Kept state from `geographic_area_name`

    * Converted `percent_estimate_percent_bachelors_degree_or_higher` to numeric and renamed to `educ_bach`

* Combined both years into a single dataset using `bind_rows()`

```{r message=FALSE}
edu15_state_slim <- edu15_state |>
  transmute(
    year = 2015,
    state = geographic_area_name,
    educ_bach = as.numeric(percent_estimate_percent_bachelors_degree_or_higher)
  )

edu16_state_slim <- edu16_state |>
  transmute(
    year = 2016,
    state = geographic_area_name,
    educ_bach = as.numeric(percent_estimate_percent_bachelors_degree_or_higher)
  )

edu_state <- bind_rows(edu15_state_slim, edu16_state_slim)
```

```{r}
az_edu <- az_cog_65_overall_state |>
  left_join(
    edu_state,
    by = c(
      "year_start" = "year",
      "location_desc" = "state"
    ))
```

Merging Education Data with Healthy Aging Data:

* Used the same filtered cognitive decline dataset (2015–2016, adults 65+, overall sex)

* Performed a left join by matching `year_start` to `year` and `location_desc` to `state`

* Final merged dataset contains one observation per state-year with both cognitive prevalence and education attainment percentage

We used the proportion of adults aged 25 years and older with a bachelor's degree or higher as our main education indicator. This measure is commonly reported in the ACS and captures individuals who have completed at least a four-year college education, which is often used as a marker of higher socioeconomic status and cognitive reserve in the literature. Compared with more detailed education categories, using "bachelor's degree or higher" gives a simple, comparable summary of educational attainment across states and years.


## Environmental Factor: Air Pollution

We obtained air pollution data from the U.S. Environmental Protection Agency (EPA) Air Quality System (AQS), specifically the 24-hour weighted mean PM2.5 concentrations aggregated at the state level.

Main steps of data wrangling was presenting below:

* Imported two pre-cleaned CSV files: `clean_air_state_2015.csv` and `clean_air_state_2016.csv` (these files were pre-processed from raw EPA AirData before the main analysis)

* Combined both years into a single dataset using `bind_rows()`

* Aggregated to state level by grouping by year and state name (`state_desc`), then calculating:

    * Mean of PM2.5 weighted mean values (`pm25_state`) across all observations within each state-year

* Filtered out rows with missing PM2.5 values using `filter(!is.na(pm25_state))` to ensure complete cases for regression analysis

Summary of Air Quality Data is as below:

```{r message=FALSE}
air15 <- read_csv("data/clean_air_state_2015.csv")
air16 <- read_csv("data/clean_air_state_2016.csv")

air_state <- bind_rows(air15, air16)

air_state |>
  head(10) |>
  mutate(year = as.character(year)) |> 
  select(state_desc, n_counties, pm25_wtd_mean, year) |> 
  kable(
    col.names = c("State/Territory", "No. of Counties", "Mean PM2.5 (µg/m³)", "Year"),
    caption = "Table 5: State/Territory-Level Air Quality Summary (PM2.5 Concentrations)",
    digits = 2,             
    align = "c"              
  )
```

We used state-level fine particulate matter (PM2.5) concentrations as our primary indicator of air pollution. Specifically, we relied on the 24-hour weighted mean PM2.5 values derived from EPA AirData annual summary reports. These data were originally reported at the county level and then aggregated to obtain state–year averages for 2015 and 2016, matching the years available in the CDC Healthy Aging cognitive dataset.

```{r}
air_state_level <- air_state |>
  group_by(year, state_desc) |>
  summarise(
    pm25_state = mean(pm25_wtd_mean, na.rm = TRUE),
    .groups = "drop"
  )

air_state_level |>
  head(10) |>
  mutate(year = as.character(year)) |> 
  kable(
    col.names = c("Year", "State/Territory", "Mean PM2.5 (µg/m³)"),
    caption = "Table 6: Aggregated State/Territory-Level PM2.5 Concentrations",
    digits = 2,              
    align = "c"
  )
```

Merging Air Pollution Data with Cognitive Decline Data:

* For consistency, we used the same filtered cognitive decline dataset (2015–2016, adults 65+, overall sex)

* Performed a left join by matching `year_start` to `year` and `location_desc` to `state_desc`

* Removed rows with missing PM2.5 values after merging (some states/territories lacked air quality monitoring data)

Final merged air pollution-AD dataset is presented as below:

```{r}
az_cog_65_overall_state <- az_cog_65_overall |>
  filter(
    year_start %in% c(2015, 2016),
    sex_group == "Overall"
  )

az_air <- az_cog_65_overall_state |>
  left_join(
    air_state_level,
    by = c(
      "year_start"    = "year",
      "location_desc" = "state_desc"
    )
  )

az_air |>
  select(year_start, location_desc, pm25_state, data_value) |>
  head(10) |>
  mutate(year_start = as.character(year_start)) |> 
  kable(
    col.names = c("Year", "State/Territory", "Mean PM2.5 (µg/m³)", "Prevalence. (%)"),
    caption = "Table 7: Linked Dataset of Cognitive Decline and Air Quality (2015–2016)",
    digits = 2,    
    align = "c"   
  )
```

</div>

<div class="content-section">

# Data Availability

All data sources used in this project are publicly available:

| Data | Source | URL |
|-------|--------|------|
|AD and Healthy Aging Data | CDC Healthy Aging Data | [https://data.cdc.gov/Healthy-Aging](https://data.cdc.gov/Healthy-Aging/Alzheimer-s-Disease-and-Healthy-Aging-Data/hfr9-rurv/about_data) |
|Income and Education Data | U.S. Census Bureau ACS | [https://data.census.gov](https://data.census.gov) |
|Air Pollution Data | EPA AirData | [https://www.epa.gov/outdoor-air-quality-data](https://www.epa.gov/outdoor-air-quality-data) |

</div>